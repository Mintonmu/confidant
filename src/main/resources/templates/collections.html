<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <script type="text/javascript" async="" src="style/js/conversion.js"></script>
    <script src="style/js/allmobilize.min.js" charset="utf-8" id="allmobilize"></script>
    <style type="text/css"></style>
    <meta content="no-siteapp" http-equiv="Cache-Control">
    <link media="handheld" rel="alternate">
    <!-- end 云适配 -->
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>我收藏的职位-招聘服务-伯乐网</title>
    <meta content="23635710066417756375" property="qc:admins">
    <meta content="QIQ6KC1oZ6" name="baidu-site-verification">

    <!-- <div class="web_root"  style="display:none">h</div> -->
    <script type="text/javascript">
        var ctx = "h";
    </script>
    <link href="h/images/favicon.ico" rel="Shortcut Icon">
    <link href="style/css/style.css" type="text/css" rel="stylesheet">
    <link href="style/css/external.min.css" type="text/css" rel="stylesheet">
    <link href="style/css/popup.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="style/js/jquery.1.10.1.min.js"></script>
    <script src="style/js/jquery.lib.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="style/js/ajaxfileupload.js"></script>
    <script src="style/js/additional-methods.js" type="text/javascript"></script>
    <!--[if lte IE 8]>
    <script type="text/javascript" src="style/js/excanvas.js"></script>

    <![endif]-->
    <script type="text/javascript">
        var youdao_conv_id = 271546;
    </script>
    <script src="style/js/conv.js" type="text/javascript"></script>
    <script src="style/js/ajaxCross.json" charset="UTF-8"></script>
    <!--layer.js-->
    <script type="text/javascript" src="style/js/layer/layer.js"></script>
</head>

<body>
<!--隐藏域 存放用户ID-->
<input type="hidden" id="userId" th:value="${session.user.id}">
<div id="body">
    <!--引入顶部导航栏-->
    <div id="header" th:fragment="common_top_nav">
        <div class="wrapper">
            <a href="/index" class="logo">
                <img src="style/images/logo.png" width="229" height="43" alt="伯乐网-专注互联网招聘"/>
            </a>
            <ul class="reset" id="navheader">
                <li>
                    <a href="/index">首页</a>
                </li>
                <li>
                    <a href="/companyList?page=1&size=9&companyName=&city=全国&stage=&field=" style="margin-left: 50px">搜索公司</a>
                </li>
                <li th:if="${session.user != null}" class="jianli">
                    <a href="javascript:void(0)" rel="nofollow" style="margin-left: 50px">我的简历</a>
                </li>
            </ul>
            <!--未登陆显示登陆注册-->
            <ul class="loginTop" th:if="${session.user}==null">
                <li>
                    <a href="/loginPage" rel="nofollow">登录</a>
                </li>
                <li>|</li>
                <li>
                    <a href="/registerPage" rel="nofollow">注册</a>
                </li>
            </ul>
            <!--已经登陆显示下拉列表-->
            <dl class="collapsible_menu" th:if="${session.user}!=null">
                <dt>
                    <span th:text="${session.user.phone}">路人甲</span>
                    <span class="red dn" id="noticeDot-0"></span>
                    <i></i>
                </dt>
                <dd class="jianli">
                    <a rel="nofollow" href="javascript:void(0)">我的简历</a>
                </dd>
                <dd id="collect">
                    <a th:href="'/selectCollections?userId='+${session.user.id}">我收藏的职位</a>
                </dd>
                <dd>
                    <a href="javascript:void(0)">我投递的职位 <span id="noticeNo" class="red dn">(0)</span></a>
                </dd>
                <dd>
                    <a href="/setting">帐号设置</a>
                </dd>
                <dd class="logout">
                    <a rel="nofollow" href="/logout">退出</a>
                </dd>
            </dl>
            <script>
                //前往简历页面
                $(".jianli").click(function () {
                    //获取当前用户ID
                    var userId=$("#userId").val();
                    location.href="/jianli?userId="+userId;
                });
            </script>
        </div>
    </div>
    <!--顶部导航栏 end-->
    <div id="container">

        <div class="clearfix">
            <div class="content_l">
                <dl class="c_collections">
                    <dt>
                        <h1><em></em>我收藏的职位</h1>
                    </dt>
                    <dd>
                        <form id="collectionsForm">
                            <ul class="reset my_collections" th:each="jobs : ${session.collectionPosition}">
                                <li>
                                    <a th:title="${jobs.companyInfo.id}" target="_blank" th:href="'/company?companyId='+${jobs.companyInfo.id}">
                                        <img th:alt="${jobs.companyInfo.companyName}" th:src="'companyLogo/'+${jobs.companyInfo.companyLogo}">
                                    </a>
                                    <div class="co_item">
                                        <h2 th:title="${jobs.position.positionName}">
                                            <a target="_blank" th:href="'/jobs?positionId='+${jobs.position.id}">
                                                <em>[[${jobs.position.positionName}]]</em>
                                                <span>（[[${jobs.position.leastSalary}]]K - [[${jobs.position.mostSalary}]]K）</span>
                                            </a>
                                        </h2>
                                        <span class="co_time">发布时间：[[${jobs.position.publishTime}]]</span>
                                        <div class="co_cate">[[${jobs.companyInfo.companyName}]] / [[${jobs.companyInfo.companyCity}]] / [[${jobs.position.workSuffer}]] / [[${jobs.position.education}]]</div>
                                        <span class="co_youhuo c7">[[${jobs.position.positionTempt}]]</span>
                                        <a class="collection_link" target="_blank" href="h/jobs/133340.html">投个简历</a>
                                        <!--隐藏域 存放职位id-->
                                        <input type="hidden" th:value="${jobs.position.id}">

                                        <!--隐藏域 存放收藏id-->
                                        <input type="hidden" th:value="${jobs.collectId}">
                                        <a onclick="qxCollection(this)" class="collection_link" href="javascript:;">
                                            取消收藏
                                        </a>

                                    </div>
                                </li>
                                <script>
                                    //点击取消收藏按钮触发的事件
                                    function qxCollection(t) {
                                        //获取 取消的收藏id
                                        var collectId = $(t).prev().val().trim();
                                        //获取用户ID
                                        var userId=$("#userId").val().trim();
                                        location.href="cancle?collectId="+collectId+"&userId="+userId;
                                    }
                                </script>
                            </ul>
                        </form>
                    </dd>
                </dl>
            </div>
            <div class="content_r">
                <div class="mycenterR" id="myInfo">
                    <h2>我的信息</h2>
                    <a th:href="'/selectCollections?userId='+${session.user.id}">我收藏的职位</a>
                    <br>
                    <a target="_blank" href="subscribe.html">我投递的职位</a>
                </div>
                <!--end #myInfo-->
                <div class="greybg qrcode mt20">
                    <img width="242" height="242" alt="拉勾微信公众号二维码" src="style/images/qr_delivery.png">
                    <span class="c7">扫描拉勾二维码，微信轻松搜工作</span>
                </div>
            </div>
        </div>
        <script src="style/js/collections.min.js"></script>
        <script>
            $(function () {
                $('.Pagination').pager({
                    currPage: 1,
                    pageNOName: "pageNo",
                    form: "collectionsForm",
                    pageCount: 1,
                    pageSize: 5
                });
            });
        </script>
        <div class="clear"></div>
        <input type="hidden" value="4c6ae41d8c254f91becdb5f9ef2d4394" id="resubmitToken">
        <a rel="nofollow" title="回到顶部" id="backtop"></a>
    </div>
    <!-- end #container -->
</div>
<!-- end #body -->
<!--引入页面底部备案号-->
<div th:replace="public/publicFragment::footer_nav"></div>

<script src="style/js/core.min.js" type="text/javascript"></script>
<script src="style/js/popup.min.js" type="text/javascript"></script>

<!--  -->

<script type="text/javascript">
    $(function () {
        $('#noticeDot-1').hide();
        $('#noticeTip a.closeNT').click(function () {
            $(this).parent().hide();
        });
    });
    var index = Math.floor(Math.random() * 2);
    var ipArray = new Array('42.62.79.226', '42.62.79.227');
    var url = "ws://" + ipArray[index] + ":18080/wsServlet?code=314873";
    var CallCenter = {
        init: function (url) {
            var _websocket = new WebSocket(url);
            _websocket.onopen = function (evt) {
                console.log("Connected to WebSocket server.");
            };
            _websocket.onclose = function (evt) {
                console.log("Disconnected");
            };
            _websocket.onmessage = function (evt) {
                //alert(evt.data);
                var notice = jQuery.parseJSON(evt.data);
                if (notice.status[0] == 0) {
                    $('#noticeDot-0').hide();
                    $('#noticeTip').hide();
                    $('#noticeNo').text('').show().parent('a').attr('href', ctx + '/mycenter/delivery.html');
                    $('#noticeNoPage').text('').show().parent('a').attr('href', ctx + '/mycenter/delivery.html');
                } else {
                    $('#noticeDot-0').show();
                    $('#noticeTip strong').text(notice.status[0]);
                    $('#noticeTip').show();
                    $('#noticeNo').text('(' + notice.status[0] + ')').show().parent('a').attr('href', ctx + '/mycenter/delivery.html');
                    $('#noticeNoPage').text(' (' + notice.status[0] + ')').show().parent('a').attr('href', ctx + '/mycenter/delivery.html');
                }
                $('#noticeDot-1').hide();
            };
            _websocket.onerror = function (evt) {
                console.log('Error occured: ' + evt);
            };
        }
    };
    CallCenter.init(url);
</script>

</body>

</html>